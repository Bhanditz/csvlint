<% content_for :title do %>
  <%= t(:results).titleize %>
<% end %>

<% unless @url.nil? %>
  <%= form_tag '/validate', :id => 'result_form' do %>
    <%= url_field_tag 'url', @url, class: 'form-control', placeholder: t(:enter_csv_url)%>
    <br/>
    <%= url_field_tag 'schema_url', @schema_url, class: 'form-control', placeholder: t(:enter_schema_url)%>
    <br/>
    <span class="input-group-btn"><%= submit_tag t(:validate).titleize, class: 'btn btn-primary btn-block btn-lg' %></span>
  <% end %>
<% end %>

<% if @validator.valid? %>
  <div class="alert alert-success" id="result">
    <% if @warnings.count == 0 %>
      <%= image_tag 'http://b.adge.me/:CSV%20-%20valid-green.svg', :'data-toggle' => "modal", :'data-target' => "#badgeModal" %>
      <p><%= t(:valid_html) %></p>
    <% else %>
      <%= image_tag 'http://b.adge.me/:CSV%20-%20warnings-yellow.svg', :'data-toggle' => "modal", :'data-target' => "#badgeModal" %>
      <p><%= t(:valid_html) %> <%= t(:valid_with_warnings) %></p>
    <% end %>
  </div>
<% else %>
  <div class="alert alert-danger" id="result">
    <%= image_tag 'http://b.adge.me/:CSV%20-%20invalid-red.svg', :'data-toggle' => "modal", :'data-target' => "#badgeModal" %>
    <p><%= t(:invalid_html) %></p>
  </div>
<% end %>

<%= error_and_warning_count(@errors, @warnings, wrapper: :h2) %>

<%= render :partial => 'errors' %>

<%= render :partial => 'warnings' %>

<%= render :partial => 'info_messages' %>

<%= render 'badge_modal'%>